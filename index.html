<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Â¡Las Estaciones del AÃ±o!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in {animation: fadeIn 0.5s ease-in-out;}
    @keyframes fadeIn {
      from {opacity: 0; transform: scale(0.95);}
      to {opacity: 1; transform: scale(1);}
    }
  </style>
</head>
<body class="bg-gradient-to-r from-blue-300 via-green-200 to-yellow-200 min-h-screen flex items-center justify-center p-4 font-sans">

  <div class="w-full max-w-2xl">
    <!-- Bienvenida -->
    <div id="welcomeCard" class="fade-in bg-white rounded-2xl shadow-2xl p-6 space-y-4">
      <h1 class="text-3xl font-extrabold text-center text-blue-700">ğŸŒ Â¡Bienvenido al Quiz de las Estaciones!</h1>
      <p class="text-gray-600 text-center">Ingresa tus datos para comenzar.</p>
      <input id="studentName" type="text" placeholder="âœï¸ Tu nombre" class="w-full border rounded-xl p-3 focus:outline-none focus:ring focus:ring-blue-200">
      <input id="studentCourse" type="text" placeholder="ğŸ« Tu curso" class="w-full border rounded-xl p-3 focus:outline-none focus:ring focus:ring-blue-200">
      <button id="startQuiz" class="w-full bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl p-3 hover:shadow-xl hover:from-blue-700">Comenzar</button>
    </div>

   <!-- Material de estudio -->
<div id="studyCard" class="hidden fade-in bg-white rounded-2xl shadow-2xl p-6 space-y-6">
  <h2 class="text-2xl font-bold text-center text-green-700">ğŸ“š Material de Estudio</h2>

  <!-- Grid de cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Primavera -->
    <div class="bg-green-50 rounded-xl shadow hover:shadow-lg transition-transform transform hover:-translate-y-1">
      <div class="p-4">
        <h3 class="text-xl font-bold text-green-700 mb-1">ğŸŒ¸ Primavera</h3>
        <p class="text-gray-700 text-sm">Florecen las plantas y las temperaturas son templadas.</p>
      </div>
    </div>

    <!-- Verano -->
    <div class="bg-yellow-50 rounded-xl shadow hover:shadow-lg transition-transform transform hover:-translate-y-1">
      <div class="p-4">
        <h3 class="text-xl font-bold text-yellow-700 mb-1">â˜€ï¸ Verano</h3>
        <p class="text-gray-700 text-sm">DÃ­as largos y calurosos, ropa ligera.</p>
      </div>
    </div>

    <!-- OtoÃ±o -->
    <div class="bg-orange-50 rounded-xl shadow hover:shadow-lg transition-transform transform hover:-translate-y-1">
      <div class="p-4">
        <h3 class="text-xl font-bold text-orange-700 mb-1">ğŸ‚ OtoÃ±o</h3>
        <p class="text-gray-700 text-sm">Caen las hojas y el clima se enfrÃ­a.</p>
      </div>
    </div>

    <!-- Invierno -->
    <div class="bg-blue-50 rounded-xl shadow hover:shadow-lg transition-transform transform hover:-translate-y-1">
      <div class="p-4">
        <h3 class="text-xl font-bold text-blue-700 mb-1">â„ï¸ Invierno</h3>
        <p class="text-gray-700 text-sm">Temperaturas frÃ­as, nieve y Navidad.</p>
      </div>
    </div>
  </div>

  <button id="goToQuiz" class="w-full bg-gradient-to-r from-green-600 to-green-500 text-white rounded-xl p-3 hover:shadow-xl hover:from-green-700">
    Ir al examen
  </button>
</div>

    <!-- Preguntas -->
    <div id="quizCard" class="hidden fade-in bg-white rounded-2xl shadow-2xl p-6 space-y-4">
      <div class="flex justify-between items-center">
        <h2 id="questionTitle" class="text-lg font-semibold text-gray-800"></h2>
        <span id="progress" class="text-sm text-gray-500"></span>
      </div>
      <div id="options" class="space-y-2"></div>
      <div class="flex justify-between">
        <button id="prevBtn" class="bg-gray-400 text-white rounded-xl p-2 px-4 hover:shadow-lg">â¬…ï¸ Anterior</button>
        <button id="nextBtn" class="bg-gray-600 text-white rounded-xl p-2 px-4 hover:shadow-lg">Siguiente â¡ï¸</button>
      </div>
      <button id="submitQuiz" class="hidden w-full bg-gradient-to-r from-green-600 to-green-500 text-white rounded-xl p-3 hover:shadow-xl hover:from-green-700">Enviar respuestas</button>
    </div>

    <!-- Resultados -->
    <div id="resultCard" class="hidden fade-in bg-white rounded-2xl shadow-2xl p-6 space-y-4 text-center">
      <h2 class="text-2xl font-bold text-gray-800">ğŸ“Š Resultados</h2>
      <p id="finalScore" class="text-lg"></p>
      <p id="finalMessage" class="text-gray-700"></p>
      <p id="sendStatus" class="text-sm text-gray-500"></p>
      <button id="newExam" class="mt-4 w-full bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-xl p-3 hover:shadow-xl hover:from-blue-700">ğŸ”„ Nuevo examen</button>
    </div>
  </div>

  <script>
    const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycby1KrW-k14q9SQn-QZYdd-V3U4OQ_pUqw7ZwTgCRAUm8umjBniNltTEm9S2Psb5lHE/exec";
    const QUESTIONS = [
      { q:"Â¿CuÃ¡l estaciÃ³n sigue despuÃ©s de la primavera?", options:["Verano","Invierno","OtoÃ±o"], answer:0 },
      { q:"Â¿En quÃ© estaciÃ³n caen las hojas de los Ã¡rboles?", options:["Invierno","OtoÃ±o","Verano"], answer:1 },
      { q:"Â¿En quÃ© estaciÃ³n hace mÃ¡s frÃ­o?", options:["Invierno","Primavera","Verano"], answer:0 },
      { q:"Â¿En quÃ© estaciÃ³n florecen las plantas?", options:["Primavera","OtoÃ±o","Verano"], answer:0 },
      { q:"Â¿En quÃ© estaciÃ³n se celebran las navidades?", options:["Primavera","Invierno","Verano"], answer:1 },
      { q:"Â¿En quÃ© estaciÃ³n usamos ropa ligera por el calor?", options:["OtoÃ±o","Primavera","Verano"], answer:2 },
      { q:"Â¿CuÃ¡l estaciÃ³n se caracteriza por lluvias y flores?", options:["Primavera","Invierno","OtoÃ±o"], answer:0 },
      { q:"Â¿CuÃ¡l estaciÃ³n es antes del invierno?", options:["OtoÃ±o","Verano","Primavera"], answer:0 },
      { q:"Â¿En quÃ© estaciÃ³n jugamos con nieve?", options:["Invierno","Primavera","Verano"], answer:0 },
      { q:"Â¿QuÃ© estaciÃ³n tiene dÃ­as mÃ¡s largos y soleados?", options:["Verano","Invierno","OtoÃ±o"], answer:0 }
    ];

    let currentQ = 0;
    let answers = Array(QUESTIONS.length).fill(null);
    let student = {name:"", course:""};

    const welcomeCard=document.getElementById("welcomeCard");
    const studyCard=document.getElementById("studyCard");
    const quizCard=document.getElementById("quizCard");
    const resultCard=document.getElementById("resultCard");
    const questionTitle=document.getElementById("questionTitle");
    const optionsDiv=document.getElementById("options");
    const prevBtn=document.getElementById("prevBtn");
    const nextBtn=document.getElementById("nextBtn");
    const submitQuiz=document.getElementById("submitQuiz");
    const finalScore=document.getElementById("finalScore");
    const finalMessage=document.getElementById("finalMessage");
    const sendStatus=document.getElementById("sendStatus");
    const progress=document.getElementById("progress");

    document.getElementById("startQuiz").addEventListener("click", ()=>{
      const name=document.getElementById("studentName").value.trim();
      const course=document.getElementById("studentCourse").value.trim();
      if(!name || !course){ alert("Por favor ingresa tu nombre y curso"); return; }
      student.name=name; student.course=course;
      welcomeCard.classList.add("hidden");
      studyCard.classList.remove("hidden");
    });

    document.getElementById("goToQuiz").addEventListener("click", ()=>{
      studyCard.classList.add("hidden");
      quizCard.classList.remove("hidden");
      showQuestion();
    });

    function showQuestion(){
      const q=QUESTIONS[currentQ];
      questionTitle.textContent = (currentQ+1)+". "+q.q;
      progress.textContent=`Pregunta ${currentQ+1}/${QUESTIONS.length}`;
      optionsDiv.innerHTML="";
      q.options.forEach((opt,idx)=>{
        const btn=document.createElement("button");
        btn.textContent=opt;
        btn.className="w-full border rounded-xl p-3 text-left hover:bg-blue-100";
        if(answers[currentQ]===idx){ btn.classList.add("bg-blue-200"); }
        btn.onclick=()=>{ answers[currentQ]=idx; showQuestion(); };
        optionsDiv.appendChild(btn);
      });
      prevBtn.disabled=(currentQ===0);
      nextBtn.style.display=(currentQ===QUESTIONS.length-1)?"none":"block";
      submitQuiz.classList.toggle("hidden", currentQ!==QUESTIONS.length-1);
    }

    prevBtn.addEventListener("click", ()=>{ if(currentQ>0){ currentQ--; showQuestion(); } });
    nextBtn.addEventListener("click", ()=>{ if(currentQ<QUESTIONS.length-1){ currentQ++; showQuestion(); } });

    function computeScore(){
      return answers.reduce((acc,a,idx)=> a===QUESTIONS[idx].answer?acc+1:acc,0);
    }

    submitQuiz.addEventListener("click", async ()=>{
      const score=computeScore();
      quizCard.classList.add("hidden");
      resultCard.classList.remove("hidden");
      finalScore.textContent=`Tu nota: ${score} / ${QUESTIONS.length}`;
      finalMessage.textContent = score>=7? "ğŸŒŸ Â¡Excelente!" : (score>=4? "ğŸ’ª Buen intento" : "ğŸ“– Sigue practicando");
      sendStatus.textContent="Guardando registro...";
      const formData=new FormData();
      formData.append("name", student.name);
      formData.append("course", student.course);
      formData.append("score", score);
      formData.append("total", QUESTIONS.length);
      formData.append("answers", JSON.stringify(answers));
      try{
        const resp=await fetch(APPS_SCRIPT_URL, {method:"POST", body:formData});
        if(resp.ok){
          sendStatus.textContent="Registro guardado correctamente âœ…";
        } else {
          sendStatus.textContent="Error al guardar en el servidor âŒ";
        }
      }catch(err){
        sendStatus.innerHTML="No se pudo enviar. Revisa el Apps Script.";
        console.error(err);
      }
    });

    document.getElementById("newExam").addEventListener("click", ()=>{
      window.location.reload();
    });
  </script>
</body>
</html>
